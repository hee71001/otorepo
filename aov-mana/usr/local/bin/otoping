#!/bin/sh

ip=$1
echo "-------------------------"
echo "Time --- Ping Result"
echo "-------------------------"
while true
 do 
        #jikan=`date +"%I:%M:%S"`
        #baka=`ping -w1 -c1 $1 | grep "64 byte"`
        #baka=`ping -w1 -c1 $ip | perl -MPOSIX -ne 'print strftime("%Y-%m-%d %H:%M:%S ",localtime), $_' | grep "64 byte" `
        baka=`ping -w1 -c1 $ip | grep "64 byte" `

        if [ "$?" = "0" ] ; then
                #echo "${jikan} --- ${baka}"
                echo "  ---  ${baka}" | perl -MPOSIX -ne 'print strftime("%Y-%m-%d %H:%M:%S ",localtime), $_'
                sleep 1
        else
                #echo ${jikan} --- Request timed out.
                echo  "  ---  Request timed out" |  perl -MPOSIX -ne 'print strftime("%Y-%m-%d %H:%M:%S ",localtime), $_'
        fi
        
        #jikan=" "
        baka=" "
 done
#ping $ip  | perl -MPOSIX -ne 'print strftime("%Y-%m-%d %H:%M:%S ",localtime), $_'
